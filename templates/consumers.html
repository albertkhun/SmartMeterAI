{% extends "base.html" %}

{% block title %}Consumer {{ consumer_id }} | SmartMeterAI{% endblock %}

{% block head %}
<div class="bg-white rounded-2xl shadow p-6">
  <h2 class="text-lg font-bold text-gray-800 mb-4">ğŸ“ˆ Usage Trend</h2>

  <div class="h-80">
    <canvas id="usageChart"></canvas>
  </div>
</div>

<script>
  const labels = {{ timestamps | tojson }};
  const values = {{ kwh_values | tojson }};

  renderUsageChart("usageChart", labels, values);
</script>

{% endblock %}

{% block content %}
  <div class="mb-6">
    <h1 class="text-2xl font-bold text-gray-800">ğŸ‘¤ Consumer Detail: {{ consumer_id }}</h1>
    <p class="text-gray-500 text-sm">Usage trend + AI risk explanation.</p>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
    <div class="bg-white rounded-2xl shadow p-6">
      <h2 class="text-lg font-bold text-gray-800 mb-3">ğŸ“Œ Risk Summary</h2>

      {% if risk %}
        <p class="text-gray-700"><b>Risk Score:</b> {{ risk.risk_score }}</p>
        <p class="text-gray-700"><b>Label:</b> {{ risk.label }}</p>
        <p class="text-gray-700"><b>Reason:</b> {{ risk.reason }}</p>
        <p class="text-gray-700"><b>Action:</b> {{ risk.action }}</p>
      {% else %}
        <p class="text-gray-500">No risk data found for this consumer.</p>
      {% endif %}
    </div>

    <div class="bg-white rounded-2xl shadow p-6">
      <h2 class="text-lg font-bold text-gray-800 mb-3">âš¡ Quick Actions</h2>

      <a href="/alerts"
         class="inline-block px-4 py-2 rounded-lg bg-gray-800 text-white hover:bg-gray-900 transition">
        â† Back to Alerts
      </a>

      <a href="/review"
         class="inline-block px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition ml-2">
        Review Case
      </a>
    </div>
  </div>

  <div class="bg-white rounded-2xl shadow p-6">
    <h2 class="text-lg font-bold text-gray-800 mb-4">ğŸ“ˆ Usage Trend</h2>
    <canvas id="usageChart"></canvas>
